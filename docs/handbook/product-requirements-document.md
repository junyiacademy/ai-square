# AI Square 產品需求文檔 (PRD)

## 1. 專案概述

### 1.1 產品願景
AI Square 是一個革命性的多智能體學習平台，旨在通過創新的 AI 技術提升全球用戶的 AI 素養能力。平台結合了傳統學習管理系統（LMS）的優點與最新的 AI 技術，為用戶提供個性化、智能化的學習體驗。

### 1.2 目標用戶
- **主要用戶**：希望提升 AI 素養的個人學習者
- **次要用戶**：教育機構、企業培訓部門
- **潛在用戶**：AI 教育內容創作者、專業培訓師

### 1.3 核心價值主張
1. **智能化學習路徑**：基於 AI 的個性化學習推薦
2. **實時 AI 輔導**：24/7 AI 助教提供即時反饋
3. **開放式學習**：支援標準化題目與開放式問答
4. **多語言支持**：覆蓋 9 種主要語言
5. **企業級解決方案**：可擴展的插件化架構

## 2. 產品架構

### 2.1 系統架構圖
```
┌─────────────────────────────────────────────────────────┐
│                     前端應用層                           │
├─────────────┬─────────────┬─────────────┬───────────────┤
│  學習平台   │   CMS後台    │  用戶中心   │   插件市集    │
├─────────────┴─────────────┴─────────────┴───────────────┤
│                     API 網關層                           │
├─────────────┬─────────────┬─────────────┬───────────────┤
│  認證服務   │  學習服務    │   AI服務    │   分析服務    │
├─────────────┴─────────────┴─────────────┴───────────────┤
│                  智能體編排層 (Orchestrator)             │
├─────────────┬─────────────┬─────────────┬───────────────┤
│    MCP      │  LLM Agent   │ Knowledge   │   Plugin     │
│  Protocol   │   Manager    │   Graph     │   Engine     │
└─────────────┴─────────────┴─────────────┴───────────────┘
```

### 2.2 技術棧
- **前端**：Next.js 15, TypeScript, Tailwind CSS, React Query
- **後端**：Python FastAPI, PostgreSQL, Redis
- **AI 層**：LangChain, OpenAI API, Google Gemini, MCP
- **部署**：Google Cloud Platform, Docker, Kubernetes

## 3. 功能模組詳細說明

### 3.1 用戶入門模組 (Onboarding)

#### 3.1.1 功能描述
為新用戶提供流暢的註冊和初始化體驗，包括能力評估和個性化設置。

#### 3.1.2 主要功能
- **多方式註冊**
  - ✅ Email/密碼註冊（本地認證）
  - ❌ 社交媒體登錄（Google OAuth2）（待開發）
  - ❌ GitHub 登錄（待開發）
  - ❌ 企業 SSO 整合（待開發）
  
- **AI 素養評估**
  - ✅ 初始能力測試（25 題）
  - ✅ 四大領域評估：Engaging, Creating, Managing, Designing with AI
  - ✅ 即時生成能力雷達圖
  
- **個性化設置**
  - ❌ 學習目標設定（待開發）
  - ❌ 時間安排偏好（待開發）
  - ✅ 語言選擇（9 種語言）
  - ❌ 學習風格選擇（待開發）

#### 3.1.3 用戶流程
```
註冊 → 驗證 → 能力評估 → 個性化設置 → 進入學習平台
```

### 3.2 內容管理系統 (CMS)

#### 3.2.1 功能描述
提供智能化、插件化的內容創建和管理平台，支援多種題型和評估方式。

#### 3.2.2 主要功能
- **Rubrics 建構器**
  - ❌ 視覺化拖拽介面（待開發）
  - ❌ AI 輔助生成評估標準（待開發）
  - ✅ 多維度評分矩陣（YAML 格式）
  - ✅ 版本控制和協作（GCS 整合）
  
- **任務創建系統**
  - ✅ 標準題型：選擇題、判斷題、配對題
  - ❌ 開放題型：論述題、專案任務、程式設計題（待開發）
  - ❌ AI 生成題目建議（待開發）
  - ❌ 難度自動評估（待開發）
  
- **內容管理**
  - ✅ 分類和標籤系統（YAML 結構）
  - ✅ 多語言內容管理（9 種語言）
  - ❌ 媒體資源庫（待開發）
  - ✅ 內容審核流程（草稿/發布狀態）

#### 3.2.3 AI 輔助功能
- ❌ **智能題目生成**：基於學習目標自動生成題目（待開發）
- ❌ **內容優化建議**：分析現有內容並提供改進建議（待開發）
- ❌ **自動翻譯**：一鍵翻譯到支援的 9 種語言（待開發）

### 3.3 學習平台流程 (Learning Platform Flow)

#### 3.3.1 功能描述
提供完整的學習體驗，從課程選擇到完成認證的全流程支援。

#### 3.3.2 核心學習流程
1. **課程發現**
   - ❌ AI 推薦課程（待開發）
   - ✅ 分類瀏覽（四大領域）
   - ❌ 搜尋和篩選（待開發）
   
2. **學習路徑**
   - ❌ 自適應學習路徑（待開發）
   - ✅ 進度追蹤（評估完成狀態）
   - ❌ 里程碑設置（待開發）
   
3. **互動學習**
   - ❌ 即時 AI 助教（待開發）
   - ❌ 同儕學習小組（待開發）
   - ❌ 討論區（待開發）

#### 3.3.3 學習模式
- ✅ **自主學習**：按自己節奏學習
- ❌ **引導學習**：跟隨 AI 建議的路徑（待開發）
- ❌ **協作學習**：小組專案和討論（待開發）
- ❌ **競賽模式**：限時挑戰和排行榜（待開發）

### 3.4 AI 輔助任務執行 (Do Tasks with LLM AI)

#### 3.4.1 功能描述
整合多個 LLM 提供智能化的任務執行支援。

#### 3.4.2 主要功能
- **即時提示**
  - ❌ 上下文感知提示（待開發）
  - ❌ 漸進式提示（不直接給答案）（待開發）
  - ❌ 多輪對話支援（待開發）
  
- **程式碼助手**
  - ❌ 程式碼解釋（待開發）
  - ❌ 除錯建議（待開發）
  - ❌ 最佳實踐推薦（待開發）
  
- **創意任務支援**
  - ❌ 腦力激盪輔助（待開發）
  - ❌ 內容生成指導（待開發）
  - ❌ 創意評估（待開發）

#### 3.4.3 LLM 整合
- ❌ OpenAI GPT-4（待開發）
- ❌ Google Gemini Pro（待開發）
- ❌ Claude 3（待開發）
- ❌ 本地部署模型（未來）

### 3.5 AI 評估與反饋 (Review and Feedback by LLM AI)

#### 3.5.1 功能描述
使用 AI 技術提供即時、個性化的評估和反饋。

#### 3.5.2 評估機制
- **標準答案評估**
  - ✅ 自動評分（選擇題）
  - ✅ 錯誤分析（顯示正確答案）
  - ❌ 知識點定位（待開發）
  
- **開放式評估**
  - ❌ 基於 Rubrics 的 AI 評分（待開發）
  - ❌ 多維度評估（創意、邏輯、完整性）（待開發）
  - ❌ 評分理由說明（待開發）
  
- **Log 分析評估**
  - ❌ 學習行為分析（待開發）
  - ❌ 思考過程評估（待開發）
  - ❌ 努力程度量化（待開發）

#### 3.5.3 反饋系統
- ✅ **即時反饋**：提交後立即獲得
- ✅ **詳細報告**：包含改進建議（解釋文字）
- ❌ **個性化建議**：基於歷史表現（待開發）
- ❌ **同儕比較**：匿名化的相對表現（待開發）

### 3.6 個人檔案與歷史儀表板 (Profile and History Dashboard)

#### 3.6.1 功能描述
提供全面的個人學習數據視覺化和歷史記錄。

#### 3.6.2 主要功能
- **能力雷達圖**
  - ✅ 四大 AI 素養領域視覺化
  - ❌ 時間序列變化（待開發）
  - ❌ 與平均水平比較（待開發）
  
- **學習歷程**
  - ✅ 完成的課程和任務（評估記錄）
  - ❌ 獲得的認證和徽章（待開發）
  - ❌ 學習時間統計（待開發）
  
- **成就系統**
  - ❌ 里程碑達成（待開發）
  - ❌ 連續學習記錄（待開發）
  - ❌ 社交分享功能（待開發）
  
- **個人分析**
  - ❌ 學習模式分析（待開發）
  - ✅ 強弱項識別（領域分數）
  - ❌ 個性化建議（待開發）

### 3.7 知識圖譜系統 (Knowledge Graph System)

#### 3.7.1 功能描述
提供視覺化、互動式的知識結構展示，幫助學習者理解概念關係和規劃學習路徑。

#### 3.7.2 核心功能
- **知識結構視覺化**
  - ✅ KSA 能力關係圖（D3.js 實作）
  - ✅ 四大領域導航圖
  - ❌ 概念層級圖（待開發）
  - ❌ 學習依賴圖（待開發）

- **學習路徑規劃**
  - ❌ 自動路徑生成（待開發）
  - ❌ 多目標路徑優化（待開發）
  - ❌ 時間預估（待開發）
  - ❌ 難度平衡（待開發）

- **知識關聯分析**
  - ❌ 前置知識檢查（待開發）
  - ❌ 相關概念推薦（待開發）
  - ❌ 知識缺口識別（待開發）
  - ❌ 學習順序建議（待開發）

#### 3.7.3 視覺化模式
- ✅ **力導向圖**：顯示概念間的關係強度
- ❌ **層級樹狀圖**：展示知識體系結構（待開發）
- ❌ **時間軸視圖**：呈現學習進度（待開發）
- ❌ **3D 網絡圖**：複雜關係的立體展示（待開發）

#### 3.7.4 互動功能
- ✅ 節點點擊查看詳情
- ✅ 縮放和平移
- ❌ 路徑高亮（待開發）
- ❌ 節點篩選（待開發）
- ❌ 自定義佈局（待開發）

## 4. 技術實現細節

### 4.1 知識圖譜系統 (Knowledge Graph System)

#### 4.1.1 資料模型
```typescript
// 概念節點
interface ConceptNode {
  id: string;
  type: 'domain' | 'competency' | 'concept' | 'skill' | 'knowledge';
  name: string;
  description: string;
  difficulty: 1 | 2 | 3 | 4 | 5;
  estimatedTime: number; // 分鐘
  tags: string[];
  mastery?: number; // 0=紅, 1=黃, 2=綠
}

// 關係邊
interface RelationshipEdge {
  source: string;
  target: string;
  type: 'prerequisite' | 'related' | 'extends' | 'contrasts';
  strength: number; // 0-1
}

// 學習路徑
interface LearningPath {
  nodes: string[]; // 有序節點
  estimatedTime: number;
  optimizationScore: number;
}
```

#### 4.1.2 技術架構
- **圖資料庫**: Neo4j（存儲概念關係）
- **圖處理**: NetworkX（路徑演算法）
- **視覺化**: D3.js / Cytoscape.js（前端渲染）
- **推薦引擎**: 基於圖分析的個人化推薦

#### 4.1.3 核心功能
1. **知識關聯查詢**
   - 前置知識識別
   - 相關概念發現
   - 學習路徑計算

2. **視覺化模式**
   - 層級視圖（樹狀結構）
   - 網絡視圖（力導向圖）
   - 時間軸視圖（學習進度）

3. **智能推薦**
   - 最短學習路徑
   - 個人化路線
   - 知識缺口分析

### 4.2 MCP (Model Context Protocol) 整合

#### 4.2.1 用途
- 標準化 AI 模型接入
- 上下文管理和傳遞
- 多模型協同工作

#### 4.2.2 實現方式
```python
# MCP 配置示例
class MCPConfig:
    models = {
        "primary": "gpt-4",
        "fallback": "gemini-pro",
        "specialized": {
            "code": "claude-3-opus",
            "creative": "gpt-4-creative"
        }
    }
    context_window = 128000
    temperature_defaults = {
        "evaluation": 0.2,
        "creative": 0.8,
        "assistance": 0.5
    }
```

### 4.2 智能體編排 (Agent Orchestrator)

#### 4.2.1 架構設計
```python
# 編排器核心結構
class AgentOrchestrator:
    def __init__(self):
        self.agents = {
            "tutor": TutorAgent(),
            "evaluator": EvaluatorAgent(),
            "content_creator": ContentAgent(),
            "analytics": AnalyticsAgent()
        }
    
    async def process_request(self, request):
        # 智能路由到合適的 agent
        agent = self.route_to_agent(request)
        # 執行並返回結果
        return await agent.execute(request)
```

#### 4.2.2 Agent 類型
1. **教學 Agent**：提供學習指導
2. **評估 Agent**：處理作業評分
3. **內容 Agent**：生成和優化內容
4. **分析 Agent**：提供學習分析

### 4.3 插件系統架構

#### 4.3.1 插件接口
```typescript
interface Plugin {
  id: string;
  name: string;
  version: string;
  type: 'content' | 'assessment' | 'analytics' | 'integration';
  
  // 生命週期方法
  onInstall(): Promise<void>;
  onActivate(): Promise<void>;
  onDeactivate(): Promise<void>;
  
  // 功能接口
  execute(context: PluginContext): Promise<any>;
}
```

#### 4.3.2 插件類型
- **內容插件**：新題型、學習資源
- **評估插件**：特殊評分邏輯
- **分析插件**：自定義報表
- **整合插件**：第三方服務

### 4.4 Chatbot 整合

#### 4.4.1 功能範圍
- ❌ 24/7 學習支援（待開發）
- ❌ 多語言對話（待開發）
- ❌ 上下文記憶（待開發）
- ❌ 情緒識別和回應（待開發）

#### 4.4.2 整合點
- ❌ 網頁內嵌 Widget（待開發）
- ❌ Mobile App SDK（待開發）
- ❌ 第三方平台（Slack, Teams）（待開發）
- ❌ API 接口（待開發）

## 5. 發展階段規劃

### Phase 1: 基礎平台與認證（✅ 已完成）
**期間：2025/06/15 - 2025/06/26（12 天）**
- ✅ 用戶認證系統（本地認證）
- ✅ 基礎 UI/UX（響應式設計）
- ✅ 多語言支援（9 種語言）
- ✅ 能力評估系統（四大領域評估）
- ✅ 基礎 Rubrics 系統
  - ✅ YAML 格式的評估標準定義
  - ✅ KSA（知識、技能、態度）對應關係
  - ✅ 多語言評估情境
- ✅ 基礎 CMS（YAML 編輯器、GCS 整合、版本控制）
  - ✅ YAML 內容管理
  - ✅ Monaco Editor 整合
  - ✅ 版本歷史追蹤
  - ❌ 視覺化 Rubrics 建構器（移至 Phase 2）

### Phase 2: 智能練習系統（進行中 - 目標：3 個月）
- ❌ CMS 多語言增強（待開發）
  - ❌ 多語言欄位輔助編輯
  - ❌ 翻譯狀態追蹤
  - ❌ AI 輔助翻譯整合
- ❌ 視覺化 Rubrics 建構器（從 Phase 1 移入）
- ❌ AI 題目生成（待開發）
  - ❌ 個人化情境式任務生成
  - ❌ 基於學習歷程的任務推薦
- ❌ 互動式評估模組（待開發）
  - ❌ 拖拽式互動題型
  - ❌ 過程追蹤評估
  - ❌ 模擬實作題
- ❌ 題目內智能助手（待開發）
  - ❌ 漸進式提示系統
  - ❌ 即時解題輔助
- ❌ 自適應學習路徑（待開發）
- ❌ 即時反饋系統（待開發）
- ❌ 基礎分析儀表板（待開發）
- ❌ Google Gemini API 整合（待開發）

### Phase 3: AI 輔助學習（6 個月）
- ❌ 完整 AI 助教功能（待開發）
  - ❌ 24/7 網站 AI 助手
  - ❌ 多輪對話支援
  - ❌ 學習問題解答
- ❌ 開放式問答評估（待開發）
- ❌ 協作學習工具（待開發）
- ❌ 進階個性化（待開發）

### Phase 4: 知識圖譜（9 個月）
- ✅ 基礎知識圖譜視覺化（已在 Phase 1 完成）
  - ✅ KSA 能力關係圖
  - ✅ 領域導航圖
- ❌ 進階知識圖譜功能（待開發）
  - ❌ 知識點關聯
    - 概念間的前置關係
    - 相關性連結
    - 難度層級
  - ❌ 學習路徑優化
    - 個人化學習路線生成
    - 最短路徑演算法
    - 進度視覺化
  - ❌ 概念視覺化
    - 多視角切換（層級、網絡、時間軸）
    - 概念地圖編輯器
    - 知識密度熱圖
  - ❌ 智能推薦升級
    - 基於圖分析的推薦
    - 知識缺口識別
    - 學習順序建議

### Phase 5: 企業版（12 個月）
- ❌ 企業管理後台（待開發）
- ❌ 團隊協作功能（待開發）
  - ❌ 班級管理系統
  - ❌ 師生關係建立
  - ❌ 班內任務指派
  - ❌ 學習進度追蹤
- ❌ 客製化部署（待開發）
- ❌ 進階分析報表（待開發）

### Phase 6: 外掛市集（15 個月）
- 開發者平台
- 插件商店
- 收益分享機制
- 社群生態系統

## 6. 成功指標 (KPIs)

### 6.1 用戶指標
- 月活躍用戶（MAU）
- 用戶留存率（7日、30日）
- 平均學習時長
- 課程完成率

### 6.2 學習成效指標
- 能力提升率
- 評估通過率
- 用戶滿意度（NPS）
- 知識應用率

### 6.3 平台指標
- 內容創建量
- AI 互動次數
- 插件安裝量
- API 調用量

### 6.4 商業指標
- 付費轉換率
- 客戶生命週期價值（LTV）
- 客戶獲取成本（CAC）
- 月經常性收入（MRR）

## 7. 風險與挑戰

### 7.1 技術風險
- **AI 模型成本**：需要優化使用策略
- **擴展性**：架構需支援大規模用戶
- **延遲問題**：確保即時回應

### 7.2 市場風險
- **競爭對手**：教育科技市場競爭激烈
- **用戶接受度**：AI 教育仍屬新概念
- **地區差異**：不同地區需求差異大

### 7.3 營運風險
- **內容品質**：需要嚴格的品質控制
- **隱私合規**：符合各地區法規
- **服務穩定性**：確保 24/7 可用性

## 8. 結論

AI Square 定位為下一代 AI 素養學習平台，通過整合最新的 AI 技術和教育理念，為全球用戶提供革命性的學習體驗。透過分階段實施和持續優化，我們有信心打造一個真正改變 AI 教育格局的產品。

---

*文檔版本: 1.4*  
*更新日期: 2025-06-26*  
*下次審查: 2025-07-26*